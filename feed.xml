<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Sharp Bell</title>
    <description>Personal blog of Osvaldo Zagordi, data scientist at University of Zurich and founder of enGene Statistics. Data science, statistics, science, machine learning, python, R and so on.
</description>
    <link>https://ozagordi.github.io/</link>
    <atom:link href="https://ozagordi.github.io/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Mon, 21 Nov 2016 15:55:40 +0100</pubDate>
    <lastBuildDate>Mon, 21 Nov 2016 15:55:40 +0100</lastBuildDate>
    <generator>Jekyll v3.1.6</generator>
    
      <item>
        <title>A very simple plot</title>
        <description>&lt;p&gt;If you look at the front cover of &lt;em&gt;The Visual Display of Quantitative Information&lt;/em&gt;,
one of the famous books by Eduard Tufte, you will see a plot made of many
lines. An intricate network of red lines of different thickness,
cutting diagonally a regular grey grid.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.edwardtufte.com/tufte/graphics/vdqi_bookcover.gif&quot; alt=&quot;VDQI bookcover&quot; class=&quot;center-block&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The plot is one of the examples of the first chapter, &lt;em&gt;Graphical Excellence&lt;/em&gt;,
and it is a graphical train schedule for Paris to Lyon in 1880s, by
&lt;a href=&quot;https://en.wikipedia.org/wiki/Étienne-Jules_Marey&quot;&gt;Étienne-Jules Marey&lt;/a&gt;. The
station are arranged vertically (the top one being Paris) at a distance
proportional to their actual distance, while time is on the horizontal axis. Each
line is a train, and the slope is the speed. It took around nine hours for the
entire trip but the TGV, first introduced in 1981, completes the trip in less
than three hours. A red line overlayed on the schedule of 100 years before
marks the progress made.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/marey_tgv.jpg&quot; alt=&quot;Marey&#39;s schedule with TGV overlaid&quot; class=&quot;center-block&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I like these plots because of their simplicity: position vs. time; something I
must have seen for the first time in secondary school or even earlier. Angle,
slope, tangent, derivative, speed, everything is there, you just name it
differently in different moments of your education.&lt;/p&gt;

&lt;p&gt;I decided to reproduce this plot for the Zurich-Milano train connection, which
is about to experience an historical moment. In a few weeks, all passenger trains
on this line will be traveling in the
&lt;a href=&quot;https://en.wikipedia.org/wiki/Gotthard_Base_Tunnel&quot;&gt;Gotthard Base Tunnel&lt;/a&gt;.
It is the world’s longest tunnel, running along more than 57 km under the Swiss
Alps at an altitude between 469 and 312 m. Trains currently travel through
another tunnel, the
&lt;a href=&quot;https://en.wikipedia.org/wiki/Gotthard_Tunnel&quot;&gt;Gotthard Tunnel&lt;/a&gt;, 15 km long,
built at the end of 19th century at an altitude of around 1,100 m. In order
to climb to that altitude, trains travel through several railway spirals.
The view is great, but the speed is not.&lt;/p&gt;

&lt;p&gt;I downloaded the schedule for a few morning trains that go through the
&lt;em&gt;Panoramastrecke&lt;/em&gt; (the panoramic track) and a few that will go through the
base tunnel, they are shown in the plot below. It might not look that impressive
compared to the TGV. But if you look at the mountains while approaching them
from the plain, it’s a different feeling.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/gotthard_trains.svg&quot; alt=&quot;Trains schedule Zurich-Milano&quot; class=&quot;center-block&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.alptransit.ch/en/media/press-releases/detail/article/memorial-ceremony-for-deceased-tunnel-workers/&quot;&gt;Nine people died&lt;/a&gt;
during construction of the Gotthard Base Tunnel. None of them was of Swiss nationality.&lt;/p&gt;

&lt;p&gt;Below is the R code used to produce the schedule plot. The timetable for a few train
was obtained on the SBB &lt;a href=&quot;http://www.sbb.ch&quot;&gt;website&lt;/a&gt; and manually written into
a &lt;a href=&quot;https://github.com/ozagordi/ozagordi.github.io/blob/gh-pages/_source/train_gotthard/timetable-table.csv&quot;&gt;csv file&lt;/a&gt;.
The coordinates of the cities were taken on Google Maps and saved
&lt;a href=&quot;https://github.com/ozagordi/ozagordi.github.io/blob/gh-pages/_source/train_gotthard/coordinates-table.csv&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tidyverse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggthemr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggthemr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;solarized&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;outer&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geosphere&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# parse coordinates and compute distances
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coordinates_table&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;train_gotthard/coordinates-table.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coordinates_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coordinates_table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;as.matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;coordinates_table&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rep&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ncol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dists&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distHaversine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trains&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_csv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;train_gotthard/timetable-table.csv&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
          &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_types&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_character&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                           &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_character&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                           &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_character&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                           &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;track&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;col_character&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;as.POSIXct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%H:%M&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distances&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data_frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dists&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trains&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trains&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full_join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distances&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;city&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&amp;gt;%&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_track&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;paste&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;track&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sep&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;_&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cbPalette&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#657b83&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;#268bd2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;train_track&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colour&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;track&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale_y_continuous&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;breaks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distances&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;distances&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;city&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale_x_datetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date_breaks&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;1 hour&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;date_labels&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%H:%M&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.title.x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.text.x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.title.y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.text.y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legend.title&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legend.text&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale_colour_manual&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cbPalette&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;Header image via &lt;a href=&quot;https://flic.kr/p/q8P66v&quot;&gt;Flickr&lt;/a&gt; (under CC BY-ND 2.0).&lt;/p&gt;
</description>
        <pubDate>Sat, 19 Nov 2016 00:00:00 +0100</pubDate>
        <link>https://ozagordi.github.io/2016/11/19/a-very-simple-plot/</link>
        <guid isPermaLink="true">https://ozagordi.github.io/2016/11/19/a-very-simple-plot/</guid>
        
        <category>dataviz</category>
        
        
      </item>
    
      <item>
        <title>Breaking ground</title>
        <description>&lt;p&gt;Most of our daily experiences, be it writing a blog post on a laptop or slicing
bread with a knife, build on the enormous amount of knowledge and progress
mankind has accumulated over the millennia. Most of the times, and quite
understandably, we take all this for granted and live thinking about the future
rather than the past. It is not worth recalling the iron age every time we use
a fork, or all the people involved in the invention of the transistor every
time we use a computer. Every now and then, though, it is hard not to be
overwhelmed by the magnitude of past scientists.&lt;/p&gt;

&lt;p&gt;It occurred to me some weeks ago with mathematicians, when I read a nice
&lt;a href=&quot;http://www.nature.com/news/majority-of-mathematicians-hail-from-just-24-scientific-families-1.20491&quot;&gt;article&lt;/a&gt;
by Davide Castelvecchi on Nature News. It reports an analysis done on the
&lt;a href=&quot;http://genealogy.math.ndsu.nodak.edu/&quot;&gt;Mathematics Genealogy Project&lt;/a&gt;, a database
aiming to list present and past mathematicians together with their advisor, in
order to build a &lt;em&gt;family tree&lt;/em&gt; of the advisor-advisee relationships. This
analysis shows that two thirds of the over 200 thousand mathematicians present
in the database can be assigned to one of only 24 families, the biggest of which
founded by the Italian mathematician (physician and natural philosopher)
Sigismondo Polcastro, who lived between 14th and 15th century.&lt;/p&gt;

&lt;p&gt;Although I had already explored this database previously, after reading this
article I decided to go further into the past, something easily done by clicking
on the &lt;strong&gt;advisor&lt;/strong&gt; link. While doing so I encountered many many &lt;em&gt;big names&lt;/em&gt;,
those that you meet multiple times when you study calculus. And I was somehow
startled that they were in direct advisor-advisee relation! It is really not too
difficult to end up on &lt;a href=&quot;https://genealogy.math.ndsu.nodak.edu/id.php?id=38586&quot;&gt;Euler&lt;/a&gt;
(over 96 thousand descendants) meeting Dirichlet, Fourier and Lagrange on the path,
to name a few.&lt;/p&gt;

&lt;p&gt;So I decided to save some of these advisor-advisee relationship and plot them
as a directed graph with &lt;a href=&quot;https://d3js.org&quot;&gt;d3&lt;/a&gt;. In the graph below an arrow
from A to B means &lt;em&gt;A was advisor of B&lt;/em&gt;.
You can (and probably have to) drag the points around to clarify some links.&lt;/p&gt;

&lt;div id=&quot;d3graph&quot;&gt;&lt;/div&gt;

&lt;style&gt;

.box {
  font: 10px sans-serif;
}

.node {
    fill: #657b83;
    opacity: 0.4;
}
.node text {
    fill: #000;
    pointer-events: none;
    font: 13px sans-serif;
}
.link {
    stroke: #657b83;
    stroke-opacity: .7;
}
&lt;/style&gt;

&lt;script type=&quot;text/javascript&quot; src=&quot;https://d3js.org/d3.v3.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
var links = [
    {source: &quot;Marin Mersenne&quot;, target: &quot;Blaise Pascal&quot;},
    {source: &quot;Marin Mersenne&quot;, target: &quot;Frans van Schooten, Jr.&quot;},
    {source: &quot;Frans van Schooten, Jr.&quot;, target: &quot;Christiaan Huygens&quot;},
//    {source: &quot;Frans van Schooten, Jr.&quot;, target: &quot;Johan de Witt&quot;},
    {source: &quot;Christiaan Huygens&quot;, target: &quot;Gottfried W. Leibniz&quot;},
    {source: &quot;Gottfried W. Leibniz&quot;, target: &quot;Nicolas Malebranche&quot;},
    {source: &quot;Nicolas Malebranche&quot;, target: &quot;Jakob Bernoulli&quot;},
    {source: &quot;Jakob Bernoulli&quot;, target: &quot;Nikolaus (I) Bernoulli&quot;},
    {source: &quot;Jakob Bernoulli&quot;, target: &quot;Johann Bernoulli&quot;},
    {source: &quot;Johann Bernoulli&quot;, target: &quot;Daniel Bernoulli&quot;},
    {source: &quot;Johann Bernoulli&quot;, target: &quot;Leonhard Euler&quot;},
    {source: &quot;Leonhard Euler&quot;, target: &quot;Joseph-Louis Lagrange&quot;},
    {source: &quot;Giovanni B. Beccaria&quot;, target: &quot;Joseph-Louis Lagrange&quot;},
    {source: &quot;Joseph-Louis Lagrange&quot;, target: &quot;Jean-Baptiste Fourier&quot;},
    {source: &quot;Joseph-Louis Lagrange&quot;, target: &quot;Simeon D. Poisson&quot;},
    {source: &quot;Jean Le Rond d&#39;Alembert&quot;, target: &quot;Pierre-Simon Laplace&quot;},
    {source: &quot;Pierre-Simon Laplace&quot;, target: &quot;Simeon D. Poisson&quot;},
    {source: &quot;Jean-Baptiste Fourier&quot;, target: &quot;Gustav Dirichlet&quot;},
    {source: &quot;Simeon D. Poisson&quot;, target: &quot;Gustav Dirichlet&quot;},
    {source: &quot;Simeon D. Poisson&quot;, target: &quot;Joseph Liouville&quot;},
    {source: &quot;Jean-Baptiste Fourier&quot;, target: &quot;Giovanni A. A. Plana&quot;},
    {source: &quot;Joseph-Louis Lagrange&quot;, target: &quot;Giovanni A. A. Plana&quot;},
//    {source: &quot;Gustav Dirichlet&quot;, target: &quot;August Kramer&quot;},
    {source: &quot;Gustav Dirichlet&quot;, target: &quot;Leopold Kronecker&quot;},
    {source: &quot;Gustav Dirichlet&quot;, target: &quot;Rudolf Lipschitz&quot;},
    {source: &quot;Rudolf Lipschitz&quot;, target: &quot;C. Felix Klein&quot;}
];

var nodes = {};

// Compute the distinct nodes from the links.
links.forEach(function(link) {
  link.source = nodes[link.source] || (nodes[link.source] = {name: link.source});
  link.target = nodes[link.target] || (nodes[link.target] = {name: link.target});
});

var width = 740,
    height = 800;

var force = d3.layout.force()
    .nodes(d3.values(nodes))
    .links(links)
    .size([width, height])
    .linkDistance(55)
    .charge(-900)
    .start();

//var svg = d3.select(&quot;body&quot;)
var svg = d3.select(&quot;#d3graph&quot;)
		.append(&quot;svg&quot;)
    .attr(&quot;class&quot;, &quot;box&quot;)
    .attr(&quot;width&quot;, width)
    .attr(&quot;height&quot;, height);

//Create all the line svgs but without locations yet
var link = svg.selectAll(&quot;.link&quot;)
    .data(force.links())
    .enter().append(&quot;line&quot;)
    .attr(&quot;class&quot;, &quot;link&quot;)
    .style(&quot;marker-end&quot;,  &quot;url(#advisor)&quot;); //Added


var node = svg.selectAll(&quot;.node&quot;)
    .data(force.nodes())
    .enter().append(&quot;g&quot;)
    .attr(&quot;class&quot;, &quot;node&quot;)
    .call(force.drag);

node.append(&quot;circle&quot;)
    .attr(&quot;r&quot;, 4)

node.append(&quot;text&quot;)
      .attr(&quot;dx&quot;, 8)
      .attr(&quot;dy&quot;, &quot;.85em&quot;)
      .text(function(d) { return d.name });

force.on(&quot;tick&quot;, function () {

    link.attr(&quot;x1&quot;, function (d) {
        return d.source.x;
    })
        .attr(&quot;y1&quot;, function (d) {
        return d.source.y;
    })
        .attr(&quot;x2&quot;, function (d) {
        return d.target.x;
    })
        .attr(&quot;y2&quot;, function (d) {
        return d.target.y;
    });

    d3.selectAll(&quot;circle&quot;).attr(&quot;cx&quot;, function (d) {
        return d.x;
    })
        .attr(&quot;cy&quot;, function (d) {
        return d.y;
    });

    d3.selectAll(&quot;text&quot;).attr(&quot;x&quot;, function (d) {
        return d.x;
    })
        .attr(&quot;y&quot;, function (d) {
        return d.y;
    });

});

// this defines the marker-end programmatically
svg.append(&quot;defs&quot;).selectAll(&quot;marker&quot;)
    .data([&quot;advisor&quot;])
  .enter().append(&quot;marker&quot;)
    .attr(&quot;id&quot;, function(d) { return d; })
    .attr(&quot;viewBox&quot;, &quot;0 -1 2 2&quot;)
    .attr(&quot;refX&quot;, 2)
    .attr(&quot;refY&quot;, 0)
    .attr(&quot;markerWidth&quot;, 6)
    .attr(&quot;markerHeight&quot;, 6)
    .attr(&quot;orient&quot;, &quot;auto&quot;)
  .append(&quot;path&quot;)
    .attr(&quot;d&quot;, &quot;M0,-1 L2,0 L0,1 z&quot;)
    //.style(&quot;stroke&quot;, &quot;#f00&quot;)
    .style(&quot;fill&quot;, &quot;#268bd2&quot;)
    .style(&quot;opacity&quot;, &quot;1.0&quot;);
&lt;/script&gt;

&lt;p&gt;The selection of nodes is completely arbitrary, I only saved nodes that
somehow struck me because something important in mathematics is named after
them.&lt;/p&gt;

&lt;p&gt;There should be other interesting cliques in the database. For example, where
are Gauss, Riemann, Dedekind? And what about Cauchy and Hilbert?&lt;/p&gt;

&lt;h4 id=&quot;technical-notes&quot;&gt;Technical notes&lt;/h4&gt;

&lt;p&gt;I found the following links useful to draw the network:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;An A to Z of extra features for the D3 force layout, a
&lt;a href=&quot;http://www.coppelia.io/2014/07/an-a-to-z-of-extra-features-for-the-d3-force-layout/&quot;&gt;tutorial&lt;/a&gt;
by Simon Raper,&lt;/li&gt;
  &lt;li&gt;a &lt;a href=&quot;http://stackoverflow.com/questions/22651346/how-to-embed-a-d3-js-example-to-the-jekyll-blog-post&quot;&gt;question&lt;/a&gt;
on Stack Overflow, &lt;em&gt;How to embed d3 in a jekyll blog post&lt;/em&gt; and references therein.&lt;/li&gt;
  &lt;li&gt;Last but not least, &lt;a href=&quot;http://stackoverflow.com/questions/13865606/append-svg-canvas-to-element-other-than-body-using-d3&quot;&gt;this&lt;/a&gt;
helped me correct a fundamental mistake I was making in selecting the relevant html element.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;Header image from &lt;a href=&quot;https://flic.kr/p/xZjJW&quot;&gt;Flickr&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
</description>
        <pubDate>Sat, 08 Oct 2016 00:00:00 +0200</pubDate>
        <link>https://ozagordi.github.io/2016/10/08/breaking-ground/</link>
        <guid isPermaLink="true">https://ozagordi.github.io/2016/10/08/breaking-ground/</guid>
        
        <category>mathematics</category>
        
        <category>dataviz</category>
        
        <category>d3</category>
        
        
      </item>
    
      <item>
        <title>There is (almost) always a model</title>
        <description>&lt;p&gt;One of the nice things of my job is the close contact between the experiments
and the analysis. While my collaborators develop the method in the lab,
working with reagents, patients samples and sophisticated machines, I sit in
front of a computer developing tools like &lt;a href=&quot;http://github.com/ozagordi/VirMet&quot;&gt;this&lt;/a&gt;
and using it to analyse the results coming from the lab.&lt;/p&gt;

&lt;p&gt;Recently, one interesting question was raised when a student defended her
PhD thesis. I wasn’t there so I was only asked about this later. The question
was “did the development of the experimental method and that of
the analysis pipeline influence each other?” No, said one colleague.
Of course they did, I later replied.&lt;/p&gt;

&lt;p&gt;Why did we have different opinions, since we both know how everything was
developed? My reasoning was that, without a computational pipeline to analyse
the results produced in the lab, my colleagues would have had hardly any hint
on whether their experiments were working or not. At the same time I could test
my tools on data of realistic size, with realistic signal-to-noise ratio and so
on. One side could not have done it without the other. My colleague, maybe because
of the context in which the question was asked, intended it in a more
specific way: did you tweak the parameters in the software in order to specifically
respond to a change in the experimental conditions? And the answer here is no,
undoubtedly.&lt;/p&gt;

&lt;p&gt;My most successful tool, at least in terms of citations, is a
&lt;a href=&quot;http://github.com/ozagordi/shorah/&quot;&gt;software&lt;/a&gt; to denoise DNA sequences, chiefly
in the analysis of viral samples. It is an unsupervised learning algorithm that
models in an explicit way, though simplified, the process of sequencing a genetically diverse
sample. We first wrote the &lt;em&gt;generative&lt;/em&gt; model, then the algorithm to do
inference on its parameters and we implemented it in an efficient way. There is a
nice correspondence between parameters in the model and physical processes
taking place in the lab. Thus, it is easily interpretable.&lt;/p&gt;

&lt;p&gt;It was great, but it took quite some time.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/model.png&quot; alt=&quot;Graphical representation of a generative model&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But do you always need such a model? According to &lt;a href=&quot;http://r4ds.had.co.nz/model-intro.html&quot;&gt;some&lt;/a&gt;,
&lt;q&gt;the goal of a model is to provide a simple low-dimensional summary of a dataset&lt;/q&gt;,
and I would stretch this to say that even a simple data visualisation can be considered a model.&lt;/p&gt;

&lt;p&gt;For example, in this more recent project I relied heavily on some heuristic
tools to denoise my data, match them by similarity and obtain summary statistics.
Advantages of these heruristic tools: they are fast,
thoroughly tested by a whole community of researchers, and I could easily use them.
I did not have to struggle to write efficient code from scratch.
On the other hand, I do not have many parameters that I could directly link to
anything that is happening in the lab.&lt;/p&gt;

&lt;p&gt;A slightly related topic of discussion in machine learning is the trade-off
between interpretability and accuracy of a model. Although accuracy here depends
on many more things, this observation makes me appreciate even more the power
of some methods in machine learning. The models underlying tools like clustering,
trees, regression are so general and powerful that they can be routinely used for
a plethora of problems in all sorts of domains with great results. It maybe
worth reminding it next time we apply one of these.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Header image from &lt;a href=&quot;https://flic.kr/p/66jA7n&quot;&gt;Flickr&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 07 Sep 2016 00:00:00 +0200</pubDate>
        <link>https://ozagordi.github.io/2016/09/07/modelling/</link>
        <guid isPermaLink="true">https://ozagordi.github.io/2016/09/07/modelling/</guid>
        
        <category>fundamentals</category>
        
        <category>science</category>
        
        <category>mathematics</category>
        
        
      </item>
    
      <item>
        <title>First steps with Docker</title>
        <description>&lt;p&gt;You might have read or heard that science, I mean academic science, has a few
&lt;a href=&quot;http://www.vox.com/2016/7/14/12016710/science-challeges-research-funding-peer-review-process&quot;&gt;problems&lt;/a&gt;,
among these a &lt;a href=&quot;http://www.vox.com/2016/7/14/12016710/science-challeges-research-funding-peer-review-process#3&quot;&gt;reproducibility
crisis&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Although the terms are often used interchangeably, there is an important
difference between reproducibility and replicability. The former is the ability
to repeat some analysis thanks to the fact that sufficient detail has been
shared by those who performed it first. Replicability is the probability
that an independent experiment will reach the same results and conclusions that
were first reported.&lt;/p&gt;

&lt;p&gt;A data scientist is typically responsible for the analysis of data that have
been produced in the lab (or in the field) by someone else, so he/she is
primarily responsible to guarantee its reproducibility. This shouldn’t be too
hard, since all you have to do is 1) saying which data were analyzed and 2) how
exactly. You share both and you are done; certainly easier than replicate a
complex and usually expensive experiment. Rmarkdown documents (by the way, this
blog is written in Rmarkdown) and Python notebook have become popular in recent
years also because they address this need.&lt;/p&gt;

&lt;p&gt;For more complex projects, where multiple tools are needed, it can be more
complicated than that, and it is recognized that much of the scientific
literature is hard to reproduce. Reasons for this are largely to be found in a
lack of right incentives, but there are several remarkable technical challenges
posed by the large number of factors that influence the results. Even if we
only consider the analysis part, the huge variety of available systems makes
reproducibility challenging.
&lt;em&gt;You performed the analysis on a Linux cluster, will it run the same on a Mac
OS X? If you ran Python 3.4, will it still work and give the same results with
Python 3.5.1? Do I have to update that library, or is the one I have already
installed recent enough? And I’m still missing that dependency…&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;full-virtualization&quot;&gt;Full virtualization&lt;/h2&gt;

&lt;p&gt;Virtual machines (VM), which I understand were created for entirely different
reasons, offer a possible way to make replication easier.
The researcher can setup an environment to run the analysis, then make an image
of this and share it. Another user who wants to reproduce the analysis can
launch this image with a VM and it will be like sitting at the same computer:
everything exactly the same.&lt;/p&gt;

&lt;p&gt;This solution presents a few disadvantages. Images are pretty big objects,
often in the order of several gigabytes. Moving them around is fairly
inconvenient, to begin with. Further, a VM takes in the order of minutes to
launch. Not too much for a one time analysis, still slightly annoying. In
general, VMs tend to be quite heavy on the hardware.&lt;/p&gt;

&lt;h2 id=&quot;enter-containers&quot;&gt;Enter containers&lt;/h2&gt;

&lt;p&gt;Containers offer a light-weight option to VMs. They are usually smaller and,
above all, they are launched in a second or less.&lt;/p&gt;

&lt;p&gt;I’ve been recently developing a &lt;a href=&quot;http://github.com/ozagordi/VirMet&quot;&gt;pipeline&lt;/a&gt;
for the analysis of DNA sequences that relies on many external tools. As it is
customary in academia, the plan is to “advertise” it with a scientific paper
and hope that many other users will find it useful, use it and cite it. But
installing ten other tools is certainly a disincentive.&lt;/p&gt;

&lt;p&gt;So, I recently looked into &lt;a href=&quot;https://www.docker.com&quot;&gt;Docker&lt;/a&gt;, which is now
probably the most famous containerisation software.&lt;/p&gt;

&lt;p&gt;A developer usually starts from one of the images found in Docker Hub and adds
the necessary configuration by writing a &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt;. Each instruction in this
file is a layer, in docker terms, and the engine builds the image by stacking
these layers in an optimized way. The resulting image can be made available to
others via Docker Hub. In this way one can make available to the community an
environment in which the application is certainly running as expected. The
advantages of Docker over VMs are not limited to being light and fast. The
presence of a central directory and the possibility to develop images easily
and in an open format both make Docker interesting. It must be said that at the
same time this poses a small risk: making dozens of images for every possible
little project that one makes and pushing it onto the hub.&lt;/p&gt;
</description>
        <pubDate>Sun, 24 Jul 2016 00:00:00 +0200</pubDate>
        <link>https://ozagordi.github.io/2016/07/24/first-steps-with-docker/</link>
        <guid isPermaLink="true">https://ozagordi.github.io/2016/07/24/first-steps-with-docker/</guid>
        
        <category>docker</category>
        
        <category>replicability</category>
        
        <category>software development</category>
        
        <category>devops</category>
        
        
      </item>
    
      <item>
        <title>Confidence interval and hypothesis test</title>
        <description>&lt;h2 id=&quot;if-all-tests-are-negative-the-positive-rate-is-zero-and-its-confidence-interval&quot;&gt;If all tests are negative, the positive rate is zero. And its confidence interval?&lt;/h2&gt;

&lt;p&gt;Some time ago a colleague presented me a simple statistics question which, as
usual, turned out to be quite interesting and intriguing. They had run 23 tests
that were all negative, and they wanted to have a confidence interval for the
proportion of positive outcomes. So, to put it in statistical terms, we have
&lt;script type=&quot;math/tex&quot;&gt;n&lt;/script&gt; observations that can be 0 or 1. Each observation has a probability
&lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt; of being positive. In formulas&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;x_i \in \{0, 1\} \quad \forall i = 1, \ldots , n \\
p(x_i=1) = \theta .&lt;/script&gt;

&lt;p&gt;We know that the number of successes is binomially distributed, thus a
sufficient statistics is &lt;script type=&quot;math/tex&quot;&gt;T = \sum_i x_i&lt;/script&gt; and that the maximum likelihood
estimator for the binomial proportion is&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\hat{\theta} = \frac{T}{n} .&lt;/script&gt;

&lt;p&gt;If the observations are all negative, the estimate for the rate is clearly zero,
but what about its confidence interval? I had never been asked to estimate the
confidence interval for the binomial distribution, so I was totally unprepared
(shame on me!). Quite instinctively, I computed the probability to observe all
23 results negative for a given &lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;, set this to 5% and solved for
&lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;. Result, 12.2%. In formula&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(\mathrm{all\;negatives}\, |\, \theta) = (1-\theta)^n \leq \alpha,&lt;/script&gt;

&lt;p&gt;which gives, solving for &lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;,&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\theta_u = 1 - \alpha^{1/n} \\
\theta_u(n=23) = 12.2% .&lt;/script&gt;

&lt;p&gt;In other words, what I did was to compute the highest &lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt; for which I
would be very surprised (5%) to see all negative outcomes. This is equivalent
to being quite sure (95% sure) to observe at least one positive outcome.&lt;/p&gt;

&lt;p&gt;My colleague had found the formula for the
&lt;a href=&quot;http://en.wikipedia.org/wiki/Binomial_proportion_confidence_interval#Clopper-Pearson_interval&quot;&gt;Clopper-Pearson interval&lt;/a&gt;
and applied it to their case: different result. Of course, I thought: I
computed the probability to observe data as extreme or more extreme than those
observed for a given value of the parameter. I did a hypothesis test, not a
confidence interval.&lt;/p&gt;

&lt;p&gt;It would have been the end of the story, had I not tried this
&lt;a href=&quot;http://www.danielsoper.com/statcalc3/calc.aspx?id=85&quot;&gt;online calculator&lt;/a&gt;.
It reports &lt;script type=&quot;math/tex&quot;&gt;0 \leq \theta \leq 0.12&lt;/script&gt; to be the 90% interval for &lt;script type=&quot;math/tex&quot;&gt;n=23&lt;/script&gt;.
This was no coincidence, as the plot below shows.&lt;/p&gt;

&lt;p&gt;In other words, for any number of tests (at least, between five and thirty)
&lt;em&gt;my&lt;/em&gt; estimate (violet points) matches the upper limit of the 90% confidence
interval computed with the Clopper-Pearson method (magenta line).&lt;/p&gt;

&lt;div class=&quot;language-r highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggthemr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggthemr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;solarized&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;outer&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# computing 90% confidence interval with &quot;exact&quot; meaning Clopper-Pearson
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cis&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binom.confint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conf.level&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;methods&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;exact&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;# max theta for which n all negative outcomes have probability 5%
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p_all_neg&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1-0.05&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data.frame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;upper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p_all_neg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ggplot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show.legend&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colour&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;#d33682&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;geom_point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;df&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;show.legend&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;TRUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colour&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;#6c71c4&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xlab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;trials&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylab&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theta&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ylim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.title.x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.text.x&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vjust&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.title.y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;face&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;bold&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;axis.text.y&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;element_text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vjust&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;14&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/figure/source/2016-07-07-confidence-interval-and-hypothesis-test/plot-1.png&quot; alt=&quot;plot of chunk plot&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;finding-confidence-intervals&quot;&gt;Finding confidence intervals&lt;/h2&gt;

&lt;p&gt;There is a one-to-one correspondence between confidence intervals and hypothesis
tests. As a matter of fact, confidence sets are found by inverting a test
statistics.&lt;/p&gt;

&lt;p&gt;Let’s start revisiting a few concepts, following the
&lt;a href=&quot;http://books.google.ch/books/about/Statistical_inference.html?id=0x_vAAAAMAAJ&amp;amp;redir_esc=y&quot;&gt;classics&lt;/a&gt;.
We have a hypothesis for a parameter of interest $\theta$. The hypothesis says
that it has a certain value&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;H_0 : \theta = \theta_0.&lt;/script&gt;

&lt;p&gt;We have data &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt; and a test statistics telling us whether to reject the
hypothesis or not. The acceptance region &lt;script type=&quot;math/tex&quot;&gt;A(\theta_0)&lt;/script&gt; is the region of the
sample space for which we do not reject &lt;script type=&quot;math/tex&quot;&gt;H_0&lt;/script&gt; at a level &lt;script type=&quot;math/tex&quot;&gt;\alpha&lt;/script&gt;. In symbols&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(X \in A(\theta_0)) \geq 1 - \alpha&lt;/script&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(X \notin A(\theta_0)) \leq \alpha.&lt;/script&gt;

&lt;p&gt;Now, for each realisation of the data &lt;script type=&quot;math/tex&quot;&gt;X&lt;/script&gt;, we take the values of &lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt; for
which the hypothesis &lt;script type=&quot;math/tex&quot;&gt;H_0&lt;/script&gt; is accepted. Then we have built a confidence set for
&lt;script type=&quot;math/tex&quot;&gt;\theta&lt;/script&gt;. We define &lt;script type=&quot;math/tex&quot;&gt;C(X)&lt;/script&gt; as the set in parameter&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;C(X)=\{\theta_0 : x \in A(\theta_0)\}.&lt;/script&gt;

&lt;p&gt;Then, &lt;script type=&quot;math/tex&quot;&gt;C(X)&lt;/script&gt; is a &lt;script type=&quot;math/tex&quot;&gt;1 - \alpha&lt;/script&gt; confidence set. This follows quite immediately
from the definition of acceptance region above&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;p(\theta \in C(X)) = p(X \in A(\theta_0)) \geq 1 − \alpha.&lt;/script&gt;

&lt;h2 id=&quot;clopper-pearson-estimator&quot;&gt;Clopper-Pearson estimator&lt;/h2&gt;

&lt;p&gt;There are several estimators for the confidence interval of the binomial
proportion. The advantage of this one is that it is exact, rather than based on
the normal approximation (see the Wikipedia page linked above). The
disadvantage is that it is conservative, i.e. there might be a smaller interval
with the same confidence level. The estimated interval is defined as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\{\theta : p(\mathrm{Bin}(n, \theta) \leq T) &gt; \frac{\alpha}{2} \} \cap
\{\theta : p(\mathrm{Bin}(n, \theta) \geq T) &gt; \frac{\alpha}{2} \}.&lt;/script&gt;

&lt;p&gt;From this definition we reconcile the fact that my estimate at 95% coincides
with the Clopper-Pearson at 90%. In fact, since we are in the special case of
&lt;script type=&quot;math/tex&quot;&gt;T=0&lt;/script&gt;, we can write the Clopper-Pearson as&lt;/p&gt;

&lt;script type=&quot;math/tex; mode=display&quot;&gt;\{\theta : p(\mathrm{Bin}(n, \theta) \leq 0) &gt; \frac{\alpha}{2} \} \cap
\{\theta : p(\mathrm{Bin}(n, \theta) \geq 0) &gt; \frac{\alpha}{2} \} =
\{\theta : p(\mathrm{Bin}(n, \theta) = 0) &gt; \frac{\alpha}{2} \}.&lt;/script&gt;

&lt;p&gt;By taking &lt;script type=&quot;math/tex&quot;&gt;\alpha = 0.10&lt;/script&gt; in the Clopper-Pearson estimate, we have the formula
I used for my estimate.&lt;/p&gt;

&lt;h2 id=&quot;a-final-observation&quot;&gt;A final observation&lt;/h2&gt;

&lt;p&gt;What is most interesting to my colleague? The hypothesis test says that those
data would already exclude &lt;script type=&quot;math/tex&quot;&gt;\theta=0.12&lt;/script&gt; or higher at 5%, but the 95% interval
according to Clopper-Pearson is &lt;script type=&quot;math/tex&quot;&gt;0 \leq \theta \leq 0.15&lt;/script&gt;. As we saw they are
two different but intimately related things. What is more important to you
depends largely on your taste.
We also had the chance to underline something that is often neglected: finding
an &lt;script type=&quot;math/tex&quot;&gt;\alpha&lt;/script&gt; confidence interval doesn’t mean we found the smallest interval
that contains the true value with probability &lt;script type=&quot;math/tex&quot;&gt;1 - \alpha&lt;/script&gt;. If you want to
investigate an extreme consequence of this, you can visit
&lt;a href=&quot;http://www.roma1.infn.it/~dagos/ci_calc.html&quot;&gt;the ultimate confidence intervals calculator&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Header image from &lt;a href=&quot;https://flic.kr/p/9u9wZk&quot;&gt;Flickr&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 07 Jul 2016 00:00:00 +0200</pubDate>
        <link>https://ozagordi.github.io/2016/07/07/confidence-interval-and-hypothesis-test/</link>
        <guid isPermaLink="true">https://ozagordi.github.io/2016/07/07/confidence-interval-and-hypothesis-test/</guid>
        
        <category>statistical inference</category>
        
        <category>nhst</category>
        
        <category>confindence interval</category>
        
        <category>binomial</category>
        
        
      </item>
    
      <item>
        <title>The most important concept</title>
        <description>&lt;p&gt;If we had to choose a single statement to pass to generations after an
imaginary destruction of the whole scientific knowledge, what would you choose?
Which idea would help the subsequent generations the most in recreating the
lost body of knowledge and, ultimately, the civilization? Richard Feynman once
stated that it is the atomic hypothesis,&lt;/p&gt;
&lt;blockquote&gt;
that all things are made of atoms—little particles that move around in perpetual
motion, attracting each other when they are a little distance apart, but
repelling upon being squeezed into one another.
&lt;/blockquote&gt;

&lt;p&gt;This struck me again a few days ago when a new coworker started here and I was
asked to introduce her to (loosely speaking) data analysis and computation.
Since years now, I’ve been working mainly with people without a strong
mathematical background. I’ve always done my best to explain things
from my side, and I’ve always been irritated by scientists who try to
impress/humiliate others with some “theorem dropping”.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/figure/source/2016-07-06-most-important-concept/unnamed-chunk-1-1.png&quot; alt=&quot;plot of chunk unnamed-chunk-1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So, if you had to choose one single concept that a person absolutely needs to
grasp before endeavouring in data analysis, what should this concept be?&lt;/p&gt;

&lt;p&gt;This is a very different question from the one Feynman answered. I am now asking
what is the concept that is absolutely needed to understand methods and results
in data analysis &lt;strong&gt;explained by someone who knows it&lt;/strong&gt;, not the single notion
that would help the most a new civilization rebuilding science from scratch.&lt;/p&gt;

&lt;p&gt;I cannot imagine a more pervasive and fundamental concept than that of function
in mathematics. From plotting any kind of results, to writing even the simplest
program, anything is hard or impossible to understand without this type of
abstraction.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Header image from &lt;a href=&quot;https://flic.kr/p/ecpHBw&quot;&gt;Flickr&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 06 Jul 2016 00:00:00 +0200</pubDate>
        <link>https://ozagordi.github.io/2016/07/06/most-important-concept/</link>
        <guid isPermaLink="true">https://ozagordi.github.io/2016/07/06/most-important-concept/</guid>
        
        <category>fundamentals</category>
        
        <category>science</category>
        
        <category>mathematics</category>
        
        
      </item>
    
  </channel>
</rss>
